<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>InkTrace - App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="styles/main.css" />
    <style type="text/tailwindcss" data-teda="tailwind-apply">
      @layer components {
        .accent {
          @apply text-indigo-700;
        }
        .card {
          @apply bg-white rounded-lg shadow-sm p-4;
        }
        .muted {
          @apply text-gray-500 text-sm;
        }
        .tag {
          @apply inline-block bg-indigo-50 text-indigo-700 px-2 py-0.5 rounded-md text-xs mr-2 mb-2;
        }
        .action {
          @apply bg-indigo-700 text-white px-3 py-1 rounded-md hover:bg-indigo-800;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-800">
    <header class="bg-white border-b">
      <div
        class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between"
      >
        <div class="flex items-center gap-4">
          <a href="index.html" class="text-indigo-700 font-bold">InkTrace</a>
          <div class="muted">Micro journal timeline</div>
        </div>
        <div class="flex items-center gap-3">
          <button
            id="btn-new"
            class="action"
            title="New entry (N)"
            aria-label="New entry"
          >
            New
          </button>
          <button
            id="btn-clear"
            class="btn-ghost"
            title="Clear all"
            aria-label="Clear all entries"
          >
            Clear
          </button>
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-6 py-8">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- left: form and search -->
        <aside class="lg:col-span-1 space-y-6">
          <section class="card">
            <h4 class="font-semibold">Add a micro entry</h4>
            <form id="entry-form" class="mt-3" aria-label="Add entry form">
              <label class="block text-sm text-gray-700">Text</label>
              <textarea
                id="entry-text"
                rows="3"
                class="w-full mt-1 p-3 border rounded-md"
                maxlength="280"
                aria-label="Entry text"
                placeholder="Write one or two sentences..."
              ></textarea>

              <label class="block text-sm text-gray-700 mt-3"
                >Tags <span class="muted">comma separated</span></label
              >
              <input
                id="entry-tags"
                type="text"
                class="w-full mt-1 p-2 border rounded-md"
                placeholder="e.g. morning, gratitude"
                aria-label="Tags"
              />

              <div class="mt-4 flex gap-2">
                <button id="save-entry" class="action" type="submit">
                  Save
                </button>
                <button id="cancel-entry" class="btn-ghost" type="button">
                  Cancel
                </button>
              </div>
            </form>
          </section>

          <section class="card" aria-labelledby="search-label">
            <div id="search-label" class="font-semibold">Search</div>
            <input
              id="quick-search"
              type="search"
              placeholder="Search text or #tag"
              class="w-full mt-3 p-2 border rounded-md"
              aria-label="Search entries"
            />
            <div class="mt-3 muted">
              Results update instantly. Press Escape to clear.
            </div>
          </section>

          <section class="card" aria-labelledby="tags-label">
            <div id="tags-label" class="font-semibold">Tags</div>
            <div id="tag-cloud" class="mt-3"></div>
            <div class="mt-3 muted">Click a tag to filter timeline.</div>
          </section>
        </aside>

        <!-- right: timeline -->
        <section class="lg:col-span-3">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-semibold">Timeline</h2>
            <div class="muted">Entries: <span id="count">0</span></div>
          </div>

          <div id="timeline" class="space-y-4" aria-live="polite">
            <!-- entries rendered here -->
          </div>

          <div
            id="empty-state"
            class="mt-8 p-8 text-center text-gray-600"
            style="display: none"
          >
            No entries yet. Click New to start a micro journal ritual.
          </div>
        </section>
      </div>
    </main>

    <template id="entry-template">
      <div class="card entry-card" data-id="__ID__">
        <div class="flex items-start justify-between">
          <div class="flex-1 pr-4">
            <div class="text-sm text-gray-500">__DATE__</div>
            <div class="mt-2 text-gray-900">__TEXT__</div>
            <div class="mt-3" aria-hidden="false">__TAGS__</div>
          </div>
          <div class="flex flex-col items-end gap-2">
            <button class="btn-ghost btn-edit" title="Edit">Edit</button>
            <button class="btn-ghost btn-delete" title="Delete">Delete</button>
          </div>
        </div>
      </div>
    </template>

    <script src="scripts/helpers.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/main.js"></script>
  </body>
</html>
